---
title: "Clase 5"
author: "Rosati, Germán y Domenech Burin, Laia"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
date: "`r format(Sys.time(), '%d %B, %Y')`"
theme: Boadilla
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message=FALSE, warning=FALSE, include=FALSE, paged.print=FALSE}
knitr::opts_chunk$set(echo=TRUE, message=FALSE, warning=FALSE, tidy=TRUE)
```

#Exploración de datos categóricos 

# Encuesta Permanente de Hogares


```{r, echo=TRUE, warning=TRUE}
library(tidyverse)
library(eph)
```


# Importo datos y los etiqueto

```{r message=FALSE, warning=FALSE, paged.print=TRUE}
df <- read_delim("usu_individual_T320.txt", delim = ";") # ESTO DESPUES CAMBIAR POR GET_MICRODATA DE ESTE AÑO

df <- organize_labels(df=df, type='individual') # Vamos a etiquetar la base
```
```{r}
options(scipen=999)
```

# Explorando los datos 

La clase de hoy vamos a concentrarnos en el análisis de datos **cuantitativos**. Recordarán que existen algunas medidas resumen de este tipo de variables:

- **cuantiles:** con la función `quantile()` podemos expresar el tipo de cuantil que deseamos. En el parámetro `probs` colocamos los cuantiles que queremos. Por default nos devuelve los cuartiles, pero en el parámetro 
  + **cuartiles:**

```{r}
quantile(df$ITF)
```

  + **deciles:**

```{r}
quantile(df$ITF, probs = seq(0, 1, 0.1))
```
Aquí vemos que hasta el 10% de la población indica que gana 0 pesos per capita mensuales, y el último decil de ingresos gana más de 10 veces de lo que gana la mitad de la población. Esto nos indica que hay muchos **outliers** en nuestra distribución de la variable, lo cual va a afectar el promedio de los ingresos.  

- **media:**
```{r}
mean(df$ITF)
```
- **mediana:**
```{r}
median(df$ITF)
```
- **desvío estándar:**
```{r}
sd(df$ITF)
```
¿Con qué función que vimos en las primeras clases podemos ver una aproximación a las medidas resumen? 
```{r}
summary(df$ITF)
```
# Representación gráfica de los datos

- El **boxplot** es un gráfico que resume los valores que vimos: nos muestra los otuliers, los rangos intercuartiles y la media. 

```{r}
df %>%
  ggplot(aes(y=ITF))+
  geom_boxplot()
```

- **histograma:** nos muestra la frecuencia de una variable cuantitativa continua

```{r}
df %>%
  ggplot(aes(x=ITF))+
  geom_histogram()+
  labs(x="Ingreso total del hogar",
       y = "n")
```

- **scatterplot:** es un gráfico que nos sirve para mostrar la correlación entre dos variables cuantitativas. 
```{r}
df %>% 
  #filter(CH06 > 16 & P47T > 1500)%>%
  ggplot(aes(x=ITF, y = DECCFR))+
  geom_point()+
  labs(x="Ingreso total familiar",
       y = "Decil de ingresos")

```
